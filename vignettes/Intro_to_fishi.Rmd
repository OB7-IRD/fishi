---
title: "Introduction to fishi"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to fishi}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, message = FALSE, warning = FALSE, include = FALSE}
library(fishi)
library(codama)
library(furdeb)
library(readxl)
library(readr)
library(kableExtra)

# Database connection
config <- configuration_file(path_file = paste0(path.expand("~"),"/.appconfig/indicator_glossary/configuration_file_fishi.yml"),
                             silent = TRUE)
balbaya_con <- postgresql_dbconnection(db_user = config[["databases_configuration"]][["balbaya_vmot5"]][["login"]],
                                                          db_password = config[["databases_configuration"]][["balbaya_vmot5"]][["password"]],
                                                          db_dbname = config[["databases_configuration"]][["balbaya_vmot5"]][["dbname"]],
                                                          db_host = config[["databases_configuration"]][["balbaya_vmot5"]][["host"]],
                                                          db_port = config[["databases_configuration"]][["balbaya_vmot5"]][["port"]])
```

# Indicators

All the fishi indicators work in the same way. Each function has several arguments :

-   **data_connection:** connection to the database of your choice, it must be a list [database name, database connection link].

-   **time_period:** the time period selected for the indicator

-   **ocean:** code for the ocean of your choice (cf referentials)

-   **country:** code for the country of your choice (cf referentials)

-   **graph_type:** plot or plotly for a dynamic figure

-   **vessel_type_select:** to select the precision of the vessels

-   **vessel_type:** vessel code (for seiners, if vessel_type_select = "engin" choose 1, if vessel_type_select = "vessel_type" choose 4, 5, 6.\

## Fishing capacity : Atlantic Ocean, 1991-2022

```{r, message=FALSE, warning=FALSE, fig.width = 8, fig.height = 8}
fishing_capacity(data_connection = balbaya_con,
                 time_period = as.integer(c(1991:2022)), 
                 ocean = as.integer(1),
                 graph_type = "plot",
                 vessel_type_select = "vessel_type",
                 vessel_type = as.integer(x = c(4, 5, 6)),
                 figure = "vessel")
```

## Fishing capacity : Indian ocean, 1981-2022

```{r, message=FALSE, warning=FALSE, fig.width = 8, fig.height = 8}
fishing_capacity(data_connection = balbaya_con,
                 time_period = as.integer(c(1981:2022)), 
                 ocean = as.integer(2),
                 graph_type = "plot",
                 vessel_type_select = "vessel_type",
                 vessel_type = as.integer(x = c(4, 5, 6)),
                 figure = "vessel")
```
